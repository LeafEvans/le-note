# 快乐数

## 题目

编写一个算法来判断一个数 `n` 是不是快乐数。

**快乐数**定义为：

- 对于一个正整数，每一次将该数替换为它每个位置上的数字的平方和。
- 然后重复这个过程直到这个数变为 1，也可能是**无限循环**但始终变不到 1。
- 如果这个过程**结果为** 1，那么这个数就是快乐数。

如果 `n` 是*快乐数*就返回 `true`；不是，则返回 `false`。

**示例 1**：

```sh
输入：n = 19
输出：true
解释：
1² + 9² = 82
8² + 2² = 68
6² + 8² = 100
1² + 0² + 0² = 1
```

**示例 2**：

```sh
输入：n = 2
输出：false
```

**提示**：

- `1 <= n <= 2³¹ - 1`

## 思路

题目中说了可能会无限循环，也就是说**求和的过程中，`sum` 会重复出现**。

<span style="color:#A72703; font-weight:bold">当遇到要快速判断一个元素是否出现在集合中时，需要使用哈希表。</span>

因此该题使用哈希法来判断这个 `sum` 是否会重复出现。若重复了就 `return false`，否则就一直找到 `sum == 1` 为止。

判断 `sum` 是否重复出现可以使用 `unordered_set`。

```go
func isHappy(n int) bool {
	set := make(map[int]struct{})
	for n != 1 {
		if _, ok := set[n]; ok {
			return false
		}
		set[n] = struct{}{}
		n = getSum(n)
	}
	return true
}

func getSum(n int) int {
	sum := 0
	for n > 0 {
		sum += (n % 10) * (n % 10)
		n = n / 10
	}
	return sum
}
```

- 时间复杂度：`O(logn)`
- 空间复杂度：`O(logn)`

