# 数据链路层

## 数据链路层的功能

### 数据链路层所处的地位

<img src="../images/image-202511031035.png" style="zoom:80%;" />

<u>数据链路层</u>使用<u>物理层</u>提供的“<span style="color:#4A70A9; font-weight:bold">比特传输</span>”服务。

<u>数据链路层</u>为<u>网络层</u>提供服务，将网络层的 <span style="color:#A72703; font-weight:bold">IP 数据报（分组）</span>封装成**帧**，传输给下一个相邻节点。

**物理链路**：传输介质（0 层）+ 物理层（1 层）实现了相邻节点间的“<span style="color:#F87B1B">物理链路</span>”。

**逻辑链路**：数据链路层需要基于“物理链路”，实现相邻节点间逻辑上无差错的“<span style="color:#F87B1B">数据链路（逻辑链路）</span>”。

---

<img src="../images/image-202511031037.webp" style="zoom:80%;" />

## 组帧

**知识总览**：

<img src="../images/image-202511051147.webp" style="zoom: 50%;" />

### 字符计数法

<img src="../images/image-202511051220.webp" style="zoom:80%;" />

- **原理**：在每个帧的开头，用一个<span style="color:#0046FF">定长计数字段</span>表示帧长。
- **最大缺点**：任何一个计数字段出错，都会导致后续所有帧无法定界。

### 字节填充法

<img src="../images/image-202511051314.webp" style="zoom:67%;" />

为避免将数据中的字符误识别为控制字符，引入了转义字符机制：

<img src="../images/image-202511051318.webp" style="zoom:80%;" />

若数据部分中也包含转义字符，可在其前再添加一个转义字符以进行转义：

<img src="../images/image-202511051331.webp" style="zoom:80%;" />

如果帧的数据部分包含“特殊字符”，则<span style="color:#63A361">发送方</span>需要<span style="color:#63A361">在这些“特殊字符”前填充“转义字符 ESC”</span>（<span style="color:#63A361">接收方</span>要做<span style="color:#63A361">逆处理</span>）。

### 零比特填充法

<img src="../images/image-202511071624.webp" style="zoom:80%;" />

- **发送方**需要对帧的数据部分进行处理，<span style="color:#DC0E0E">每当遇到连续 5 个 1，就填充一个 0</span>。
- **接收方**需要对帧的数据部分进行逆处理，<span style="color:#DC0E0E">每当遇到连续 5 个 1，就删掉后面的 0</span>。

> [!tip]
>
> 数据链路层的 HDLC、PPP 协议均使用零比特填充法进行组帧。

### 违规编码法

