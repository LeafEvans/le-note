# 变量、常量、变量命名规则

## 变量的来历

程序运行过程中的数据都是保存在内存中，我们想要在代码中操作某个数据时就需要去内存上找到这个变量，但是如果我们直接在代码中通过内存地址去操作变量的话，代码的可读性会非常差而且还容易出错，所以我们就**利用变量将这个数据的内存地址保存**起来，以后直接通过这个变量就能找到内存上对应的数据了。

## 变量类型

变量（Variable）的功能是存储数据。不同的变量保存的数据类型可能会不一样。经过半个多世纪的发展，编程语言已经基本形成了一套固定的类型，常见变量的数据类型有：整型、浮点型、布尔型等。

Go 语言中的每一个变量都有自己的类型，并且<span style="color:#1E93AB; font-weight:bold">变量必须经过声明才能开始使用</span>。

## Go 语言中变量的声明

Go 语言变量名由字母、数字、下划线组成，其中<span style="color:#FF9A00; font-weight:bold">首个字符不能为数字</span>。Go 语言中**关键字**和**保留字**都不能用作变量名。

Go 语言中的变量需要声明后才能使用，<span style="color:#6A0066; font-weight:bold">同一作用域内不支持重复声明</span>，并且 Go 语言的变量声明后必须使用。

### `var` 变量声明

```go
var 变量名称 type
```

```go
var name string 
var agr int
var isOK bool
```

```go
import (
	"fmt"
)

func main() {
	var username = "张三"
	var age int = 20
	fmt.Println(username, age)
}
```

<img src="../../images/image-202509021443.png" style="zoom:67%;" />

### 一次定义多个变量

```go
var identifier1, identifier2 type
```

```go
package main

import "fmt"

func main() {
	var username, sex string
	username = "张三"
	sex = "男"
	fmt.Println(username, sex)
}
```

<img src="../../images/image-202509021449.png" style="zoom:67%;" />

声明变量时赋值：

```go
var a, b, c = 1, 2, 3, false
```

### 批量声明变量时指定类型

```go
package main

import "fmt"

func main() {
	var (
		a string
		b int
		c bool
	)
	a = "哈基米"
	b = 10
	c = true
	fmt.Println(a, b, c)
}
```

<img src="../../images/image-202509021454.png" style="zoom:67%;" />

批量声明变量并赋值：

```go
package main

import "fmt"

func main() {
	var (
		a string = "张三"
		b int    = 10
		c bool   = true
	)
	fmt.Println(a, b, c)
}
```

<img src="../../images/image-202509021451.png" style="zoom:67%;" />

### 变量的初始化

Go 语言在声明变量的时候，会自动对变量对应的内存区域进行初始化操作。每个变量会被初始化成其类型的默认值，例如： 整型和浮点型变量的默认值为 0；字符串变量的默认值为空字符串；布尔型变量默认为 `false`； 切片、函数、指针变量的默认为 `nil`。

当然我们也可在声明变量的时候<span style="color:#F78D60">为其指定初始值</span>。变量初始化的标准格式如下：

```go
var 变量名 类型 = 表达式
```

举例：

```go
var name string = "曼波"
var age int = 18
```

或者一次初始化多个变量并赋值：

```go
var name, age = "叮咚鸡", 20
```

### 类型推导

有时候我们会将变量的类型省略，这个时候编译器会根据等号右边的值来推导变量的类型完成初始化。

```go
var name = "耄耋"
var age = 18
```

### 短变量声明法

在函数内部，可以使用更简略的 `:=` 方式声明并初始化变量。

> [!TIP]
>
> 短变量只能用于声明局部变量，不能用于全局变量的声明。

```go
变量名 := 表达式
```

```go
package main

import (
	"fmt"
)

// 全局变量 m
var m = 100

func main() {
	n := 10
	// 此处声明局部变量 m
	m := 200
	fmt.Println(m, n)
}
```

<img src="../../images/image-202509021502.png" style="zoom:67%;" />

> [!TIP]
>
> 在 `main` 函数内声明的局部变量 `m` 会屏蔽（覆盖）全局变量 `m`。

```go
m1, m2, m3 := 10, 20, 30
fmt.Println(m1, m2, m3)
```

<img src="../../images/image-202509021505.png" style="zoom:67%;" />

### 匿名变量

在使用多重赋值时，若想要忽略某个值，可以使用**匿名变量**（anonymous variable）。匿名变量使用一个 `_` 表示，例如：

```go
package main

import "fmt"

func Info() (string, int) {
	return "胖宝宝", 100
}

func main() {
	username, _ := Info()
	fmt.Println(username)
}
```

<img src="../../images/image-202509021509.png" style="zoom:67%;" />

匿名变量不占用<span style="color:#E62727; font-weight:bold">命名空间</span>，不会<span style="color:#E62727; font-weight:bold">分配内存</span>，所以匿名变量之间不存在<span style="color:#E62727; font-weight:bold">重复声明</span>。

> [!TIP]
>
> 1. <span style="color:#8C1007; font-weight:bold">函数外</span>的每个语句都必须以<span style="color:#8C1007; font-weight:bold">关键字</span>开始（`var`、`const`、`func` 等）。
> 2. `:=` 不能使用在函数外。
> 3. `_` 多用于占位，表示忽略值。

## Go 语言中的常量

相对于变量，常量是恒定不变的值，多用于定义程序运行期间不会改变的那些值。常量的声明和变量声明非常类似，只是把 `var` 换成了 `const`，常量在定义的时候必须赋值。

### 使用 `const` 定义常量

```go
const Pi = 3.1415
const E = 2.7182
```

声明了 `Pi` 和 `E` 这两个常量后，在整个程序运行期间它们的值都不能再发生变化了。

多个变量也可以同时声明：

```go
const (
	Pi = 3.1415
	E  = 2.7182
)
```

`const` 同时声明多个常量时，如果省略了值则表示和上面一行的值相同。例如：

```go
package main

import "fmt"

const (
	A = 100
	B
	C
	D = 200
	E
)

func main() {
	fmt.Println(A, B, C, D, E)
}
```

<img src="../../images/image-202509021717.png" style="zoom:67%;" />

上面示例中，常量 `A`、`B`、`C` 的值为 100，`D`、`E` 的值为 200。

打印 `Pi` 和 `E` 的值：

```go
package main

import (
	"fmt"
	"math"
)

func main() {
	const Pi = math.Pi
	const E = math.E
	fmt.Println(Pi)
	fmt.Println(E)
}
```

<img src="../../images/image-202509021721.webp" style="zoom:67%;" />

### `const` 常量结合 `iota` 使用

`iota` 是 Go 语言的常量计数器，专门用于在 **`const` 声明块**中生成一系列有规律的常量值,只能在常量的表达式中使用。

`iota` 在 `const` 关键字出现时将被重置为 0（`const` 内部的第一行之前），`const` 中每新增一行常量声明将使 `iota` 计数一次（`iota` 可理解为 `const` 语句块中的行索引）。

#### `iota` 只能在常量的表达式中使用

```go
fmt.Println(iota)
```

<img src="../../images/image-202509021731.png" style="zoom:67%;" />

#### 每次 `const` 出现时，都会让 `iota` 初始化为 0

```go
package main

import (
	"fmt"
)

// A = 0
const A = iota

const (
	// B = 0
	B = iota
	// C = 1
	C
	D
)

func main() {
	fmt.Println(A, B, C, D)
}
```

<img src="../../images/image-202509021735.png" style="zoom:67%;" />

#### `const`、`iota` 使用 `_` 跳过某些值

```go
package main

import (
	"fmt"
)

const (
	A = iota
	B
	_
	C
	D
)

func main() {
	fmt.Println(A, B, C, D)
}
```

<img src="../../images/image-202509021738.png" style="zoom:67%;" />

#### `iota` 声明中间插队

```go
package main

import "fmt"

const (
	A = iota
	B = 100
	C
	D = iota
	E
)
const F = iota

func main() {
	fmt.Println(A, B, C, D, E, F)
}
```

<img src="../../images/image-202509021743.png" style="zoom:67%;" />

#### 多个 `iota` 定义在一行

```go
package main

import "fmt"

const (
	// 1, 2
	A, B = iota + 1, iota + 2
	// 2, 3
	C, D
	// 3, 4
	E, F
)

func main() {
	fmt.Println(A, B, C, D, E, F)
}
```

<img src="../../images/image-202509021748.png" style="zoom:67%;" />

> [!TIP]
>
> - `iota` 的递增以**行为单位**进行。
> - 同一行声明多个常量时，若使用表达式继承机制，会按照**位置一一对应**地继承前一行的多个表达式。 
> - 声明多个常量并使用表达式继承时，要求每一行的**常量数量必须相等**（例如：第一行声明 `A`、`B` 两个常量，第二行不能只声明 `C` 一个常量；若 `C` 单独初始化则无此限制）。  
> - `iota` 的作用域仅限于当前 `const` 块，不同 `const` 块中的 `iota` 会重新从 0 开始计数。 
> - `iota` 的初始值为 0（第一行），之后每增加一行自动加 1，无论第一个常量是否显式赋值为 `iota`。

## Go 语言变量、常量命名规则

1. 变量名称必须由数字、字母、下划线组成。
2. 标识符开头不可是数据。
3. 标识符不可是保留字或关键字。
4. 变量的名字需要区分大小写，例如 `age` 和 `Age` 是不同的变量。在实际运用中，建议不要使用一个单词大小写来区分两个变量。
5. 标识符（变量名称）一定要见名思义；变量名称建议用名词，方法名称建议用动词。
6. 变量名一般采用驼峰式，当遇到特有名词（缩写或简称，如 DNS）时，特有名词根据是否私有全部大写或小写。

## Go 语言代码风格

1. 代码每一行结束后不用写分号（`;`）。

2. 运算符左右建议各加一个空格。

   ```go
   var username string = "LeafEvans"
   ```

3. Go 语言使用驼峰式命名，当名字有几个单词组成时优先使用大小写分隔。

4. 强制的代码风格，左括号必须紧接着语句不换行。

5. `go fmt` 主要用于格式化文档，使所有人的代码风格保持一致。

   ```bash
   go fmt main.go
   main.go
   ```

   

   